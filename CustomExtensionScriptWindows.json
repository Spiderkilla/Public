{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "location": {
            "type": "String",
            "defaultvalue": "westeurope"
        },
        "virtualMachineName": {
            "type": "String"
        }   
    },
    "functions": [],
    "variables": {},
    "resources": [
                {
        "type": "Microsoft.Compute/virtualMachines/extensions",
        "name": "[concat(parameters('virtualMachineName'), '/CustomScriptExtension')]",
        "apiVersion": "2020-06-01",
        "location": "[parameters('location')]",
        "properties": {
          "publisher": "Microsoft.Compute",
          "type": "CustomScriptExtension",
          "typeHandlerVersion": "1.10",
          "autoUpgradeMinorVersion": true,
          "settings": {
            
          },
        "protectedSettings": { 
        "commandToExecute": "powershell -ExecutionPolicy Unrestricted -File CreateADDS.ps1",
        "fileUris": ["https://raw.githubusercontent.com/Spiderkilla/Public/main/CreateADDS.ps1"]

        }
      }
    ],
    "outputs": {}
}
